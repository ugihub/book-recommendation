<!DOCTYPE html>
<html>
<head>
  <title>Admin - Edit Buku Menunggu</title>
</head>
<body>
  <h2>Edit Buku Menunggu Persetujuan</h2>

  <% if (success_msg) { %>
    <div class="flash-message success"><%= success_msg %></div>
  <% } %>
  <% if (error_msg) { %>
    <div class="flash-message error"><%= error_msg %></div>
  <% } %>

  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Judul Buku</th>
        <th>Perubahan</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      <% if (edits && edits.length > 0) { %>
        <% edits.forEach(edit => { %>
          <tr>
            <td><%= edit.id %></td>
            <td><%= edit.judul %></td>
            <td>
              <ul>
                <% if (edit.edit_judul) { %><li>Judul: <%= edit.edit_judul %></li><% } %>
                <% if (edit.edit_penulis) { %><li>Penulis: <%= edit.edit_penulis %></li><% } %>
                <% if (edit.genre) { %><li>Genre: <%= edit.genre %></li><% } %>
                <% if (edit.tahun_terbit) { %><li>Tahun Terbit: <%= edit.tahun_terbit %></li><% } %>
                <% if (edit.sampul_url) { %><li>Sampul: <img src="<%= edit.sampul_url %>" width="100"></li><% } %>
              </ul>
            </td>
            <td>
              <form action="/admin/approve-edit/<%= edit.id %>" method="POST">
                <button type="submit">Setujui</button>
              </form>
              <form action="/admin/reject-edit/<%= edit.id %>" method="POST">
                <button type="submit">Tolak</button>
              </form>
            </td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr><td colspan="4">Tidak ada edit buku yang menunggu.</td></tr>
      <% } %>
    </tbody>
  </table>
</body>
</html>